<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="content-type" content="text/html; charset=utf-8" />

<title>{{ if .IsHome }}{{ site.Title }}{{ else }}{{ printf "%s | %s" .Title site.Title }}{{ end }}</title>

{{/* Get page description */}}
{{ $description := "" }}
{{ if .Params.description }}
  {{ $description = .Params.description }}
{{ else if .Summary }}
  {{ $description = .Summary | plainify | truncate 160 }}
{{ else if .IsHome }}
  {{ $description = site.Params.description | default "Golang for all - Articles about Go programming language" }}
{{ else }}
  {{ $description = printf "%s - %s" .Title site.Title }}
{{ end }}

{{/* Get page image */}}
{{ $image := "" }}
{{ $featured_image := partial "func/GetFeaturedImage.html" . }}
{{ if $featured_image }}
  {{/* Convert relative URL to absolute */}}
  {{ if hasPrefix $featured_image "http" }}
    {{ $image = $featured_image }}
  {{ else }}
    {{ $image = $featured_image | absURL }}
  {{ end }}
{{ else }}
  {{/* Default image */}}
  {{ $image = printf "%s/gopher.png" site.BaseURL }}
{{ end }}

{{/* Get page URL */}}
{{ $pageURL := .Permalink | absURL }}

{{/* Get page title */}}
{{ $pageTitle := "" }}
{{ if .IsHome }}
  {{ $pageTitle = site.Title }}
{{ else }}
  {{ $pageTitle = printf "%s | %s" .Title site.Title }}
{{ end }}

{{/* Meta Description */}}
<meta name="description" content="{{ $description }}">

{{/* Open Graph / Facebook */}}
<meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}">
<meta property="og:url" content="{{ $pageURL }}">
<meta property="og:title" content="{{ $pageTitle }}">
<meta property="og:description" content="{{ $description }}">
<meta property="og:image" content="{{ $image }}">
<meta property="og:site_name" content="{{ site.Title }}">
<meta property="og:locale" content="{{ .Lang }}">
{{ if .IsPage }}
  {{ if .PublishDate }}
    <meta property="article:published_time" content="{{ .PublishDate.Format "2006-01-02T15:04:05Z07:00" }}">
  {{ end }}
  {{ if .Lastmod }}
    <meta property="article:modified_time" content="{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}">
  {{ end }}
  {{ with .GetTerms "tags" }}
    {{ range . }}
      <meta property="article:tag" content="{{ .LinkTitle }}">
    {{ end }}
  {{ end }}
{{ end }}

{{/* Twitter Card */}}
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:url" content="{{ $pageURL }}">
<meta name="twitter:title" content="{{ $pageTitle }}">
<meta name="twitter:description" content="{{ $description }}">
<meta name="twitter:image" content="{{ $image }}">
{{ if site.Params.twitter }}
  <meta name="twitter:site" content="{{ site.Params.twitter }}">
  <meta name="twitter:creator" content="{{ site.Params.twitter }}">
{{ end }}

{{/* Canonical URL */}}
<link rel="canonical" href="{{ $pageURL }}">

{{/* Alternate languages */}}
{{ range .Translations }}
  <link rel="alternate" hreflang="{{ .Lang }}" href="{{ .Permalink }}">
{{ end }}

<meta name="yandex-verification" content="10233a4b32f4dc29" />
<meta name="yandex-verification" content="cfa4be404c1af368" />

{{/* Favicon */}}
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="manifest" href="/site.webmanifest">

{{ partialCached "head/css.html" . }}
{{ partialCached "head/js.html" . }}

<link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.4.6/css/flag-icon.min.css" integrity="sha256-YjcCvXkdRVOucibC9I4mBS41lXPrWfqY2BnpskhZPnw=" crossorigin="anonymous" />
{{ if .Store.Get "hasMermaid" }}
<script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true, theme: 'neutral' });
</script>
{{ end }}
